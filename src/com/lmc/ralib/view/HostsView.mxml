<?xml version="1.0" encoding="utf-8"?>
<components:ViewBackBase xmlns:fx="http://ns.adobe.com/mxml/2009" creationComplete="view1_creationCompleteHandler(event)" 
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:components="com.lmc.ralib.components.*" 
		 title="Systems" viewActivate="init()">
	
	<fx:Script>
		<![CDATA[	
			import mx.events.FlexEvent;
			
			import spark.events.IndexChangeEvent;
			protected function maingrid_changeHandler(event:IndexChangeEvent):void
			{
				//var tracker:AnalyticsTracker = ApplicationStore.services["tracker"];
				//tracker.trackPageview("/Systems/System/" + maingrid.selectedItems[0]);
				var item:Object = event.currentTarget.selectedItem;
				//this.data.hostdata = hostdata;
				//{hostdata:this.hostdata, hostname:data.hostname}
				navigator.pushView(HostView, {host: item} );
				
			}
			private function init():void{
				this.but_refresh.addEventListener(MouseEvent.CLICK, onRefreshClick);

			}
			
			private function onRefreshClick(event:MouseEvent):void{
				hostslist.refreshlist();
			}
			
			protected function view1_creationCompleteHandler(event:FlexEvent):void
			{
				
				if (data && data.hasOwnProperty("hosts")){
					but_refresh.includeInLayout = false;
					hostslist.dataProvider = data.hosts;
				}
				else{
					this.backButton.includeInLayout = false;
				}
				
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:VGroup height="100%" width="100%" >
		<components:HostsList height="100%" width="100%" id="hostslist" 
							  change="maingrid_changeHandler" allowMultipleSelection="false" />
		
		
	</s:VGroup>
	<components:actionContent>
		<!-- <s:Button styleName="addButton" id="addbutt" /> 
		<s:Spacer width="5" /> -->
		<s:Button styleName="refreshButton" id="but_refresh" />
	</components:actionContent>
		
</components:ViewBackBase>
